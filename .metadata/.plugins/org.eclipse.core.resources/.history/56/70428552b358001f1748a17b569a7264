package apex.basepage;

import org.testng.annotations.BeforeClass;

public class BaseClass {
	
	
	  @BeforeClass(alwaysRun = true)
	  @Parameters({"browserName"})
	  public void launchBrowser(@Optional("chrome") String browserName) {
	    try {
	      LogFormatter.initLogFormatter(ThreadUtils.getITestContext().getName());
	      ArtefactBuilder.initArtefactBuilder(ThreadUtils.getITestContext().getName());
	      Driver.initDriverForWeb(browserName);
	      ThreadUtils.setScreenRef(new Screen());
	      log().warn("Trying to Launch Browser");
	      getDriver().manage().window().maximize();
	      getDriver().manage().deleteAllCookies();
	      getDriver().manage().timeouts().implicitlyWait(Integer.parseInt(getParameter("implicitlyWaitTime", "10")), TimeUnit.SECONDS);
	      getDriver().manage().timeouts().pageLoadTimeout(Integer.parseInt(getParameter("pageLoadTimeout", "120")), TimeUnit.SECONDS);
	      getDriver().manage().timeouts().setScriptTimeout(Integer.parseInt(getParameter("scriptTimeout", "120")), TimeUnit.SECONDS);
	      log().info(browserName + " browser is launched");
	    } catch (Exception e) {
	      e.printStackTrace();
	    } 
	  }
	  
	  @AfterClass(alwaysRun = true)
	  public void endBrowser() throws IOException {
	    Driver.quitDriver();
	    ArtefactBuilder.ArtefactDocxBuilder(ThreadUtils.getITestContext().getName());
	  }
	  
	  
	  public static WebDriver getDriver() {
		    return ThreadUtils.getDriverRef();
		  }
}
